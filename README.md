# üöÄ Automation Engine System

‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Automation Workflow ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á (Instructions), ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Governance) ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (Execution) ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô

---

## üèóÔ∏è 1. High-Level Design (HLD)

‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å **Clean Architecture** ‡πÅ‡∏ö‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 4 Layer ‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ó‡∏î‡∏™‡∏≠‡∏ö:

1. **API Handler**: ‡∏£‡∏±‡∏ö HTTP Request ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥ Parameter Validation
2. **Service (Business Logic)**: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÅ‡∏•‡∏∞ Workflow ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÅ‡∏ö‡πà‡∏á‡∏ï‡∏≤‡∏° Module
3. **Repository (Data Access)**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Database ‡∏ú‡πà‡∏≤‡∏ô GORM Gen
4. **Domain (Entity)**: ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏•‡∏±‡∏Å (Models) ‡πÅ‡∏•‡∏∞ Generated Code

---

## üìÇ 2. Project Structure & LLD

‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏ö‡∏ö **Modular Clean Architecture**:

```text
automation-engine/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/
‚îÇ       ‚îî‚îÄ‚îÄ main.go           # ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ (Wiring & Setup)
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ api/                  # HTTP Handlers (Transport Layer)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ definition_handler.go
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ governance_handler.go
‚îÇ   ‚îú‚îÄ‚îÄ domain/               # Core Domain
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entity/           # GORM Gen Models (def_, policy_, run_, log_)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gen/              # GORM Gen Query Helpers
‚îÇ   ‚îú‚îÄ‚îÄ repository/           # Interface & Implementation ‡∏Ç‡∏≠‡∏á Data Access
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ action_repo.go
‚îÇ   ‚îî‚îÄ‚îÄ service/              # Business Logic (Module-based)
‚îÇ       ‚îú‚îÄ‚îÄ definition_service.go  # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏° def_*
‚îÇ       ‚îú‚îÄ‚îÄ governance_service.go  # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏° policy_*
‚îÇ       ‚îî‚îÄ‚îÄ automation_service.go  # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏° run_* & executor
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ gen/                  # Script ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GORM Gen
‚îî‚îÄ‚îÄ go.mod

```

---

## üóÑÔ∏è 3. Database Schema Workflow

‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 4 ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ï‡∏≤‡∏°‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:

| ‡∏Å‡∏•‡∏∏‡πà‡∏° | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏Å | ‡∏ß‡∏¥‡∏ò‡∏µ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Delete) |
| --- | --- | --- |
| **`def_`** | **Definition**: ‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ (Actions, Conditions) | **Soft Delete** (‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥) |
| **`policy_`** | **Governance**: ‡∏Ñ‡∏∏‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Å‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á | **Hard Delete** |
| **`run_`** | **Workflow**: ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ô‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á | **Soft/Hard Delete** |
| **`log_`** | **Audit**: ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞ Monitoring | **Don't Delete** |

---

## üîÑ 4. Service Workflow (Logic Flow)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API ‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

1. **Request**: User ‡∏¢‡∏¥‡∏á API ‡∏°‡∏≤‡∏ó‡∏µ‡πà Handler
2. **Validation**: Handler ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô `?id=1`) ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
3. **Processing**: Service ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Repository ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
4. **Execution (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)**: `ExecutionService` ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç (Condition) ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡πà‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô Action
5. **Logging**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `log_` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á

---

## üåê 5. API Documentation (Example)

### **Definition Module** (Manage System Capabilities)

#### **Get Action Details**

‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á (Action) ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö

* **URL:** `/api/v1/definition/actions`
* **Method:** `GET`
* **Query Params:**
* `id` (required): ‡∏£‡∏´‡∏±‡∏™‡∏Ç‡∏≠‡∏á Action (e.g., `ACT001`)


* **Success Response:** `200 OK`
* **Example:**
```bash
curl "http://localhost:8080/api/v1/definition/actions?id=ACT001"

```



---

## üõ†Ô∏è 6. How to Run

1. **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies:**
```bash
go mod tidy

```


2. **Generate Models (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DB Schema):**
```bash
go run scripts/gen/main.go

```


3. **Start Server:**
```bash
go run cmd/server/main.go

```



---

### **Would you like me to...**

* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô **`governance_service.go`** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏° `policy_` ‡∏ï‡πà‡∏≠‡πÑ‡∏´‡∏°‡∏Ñ‡∏£‡∏±‡∏ö?
* ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏°‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏≥ **`executor_service.go`** ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏ä‡πá‡∏Ñ Logic ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á?

swag init -g cmd/server/main.go